#compdef vv

_arguments -C \
  '--socket[Specify the socket to use]:socket path:_files' \
  '--help[Show help and exit]' \
  '1:mode:->mode' \
  '*:argument:' \
  && return

case $state in
  mode)
    local -a modes
    modes=(
      'attach:Attach to a velvet session'
      'lua:Execute lua code in a velvet session'
      'foreground:Start a velvet session without daemonizing'
      'quit:Quit the velvet session, killing all windows' 
      'detach:Detach the current terminal from the session' 
    )
    _describe 'mode' modes
    ;;
  args)
    case $words[1] in
      lua)
        _arguments \
          '1:lua code:'
        ;;
      *)
        _arguments \
          '*:arguments:'
        ;;
    esac
    ;;
esac

